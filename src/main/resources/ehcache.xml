<?xml version="1.0" encoding="UTF-8"?>

<ehcache:config
        xmlns:ehcache="http://www.ehcache.org/v3"
        xmlns:jcache="http://www.ehcache.org/v3/jsr107">


    <ehcache:persistence directory="/tmp/ehcache"/>
    <ehcache:thread-pools>
        <ehcache:thread-pool alias="defaultDiskPool" min-size="1" max-size="2"/>
        <ehcache:thread-pool alias="cache2Pool" min-size="1" max-size="2"/>
    </ehcache:thread-pools>

    <ehcache:disk-store thread-pool="defaultDiskPool" />


    <!-- TODO: check on serializer...kryo? -->
    <!-- TODO: copy on read -->
    <ehcache:cache-template name="element-store-template">
        <ehcache:key-type copier="org.ehcache.impl.copy.SerializingCopier"
                          serializer="org.ehcache.jsr107.LongSerializer">
            java.lang.Long
        </ehcache:key-type>
        <ehcache:expiry>
            <ehcache:none/>
        </ehcache:expiry>
        <ehcache:resources>
            <ehcache:heap unit="GB">1</ehcache:heap>
            <ehcache:disk unit="GB" persistent="true">50</ehcache:disk>
        </ehcache:resources>
        <ehcache:disk-store-settings thread-pool="pool-disk" writer-concurrency="2"/>
    </ehcache:cache-template>



    <ehcache:cache alias="sikm">
        <ehcache:key-type copier="org.ehcache.impl.copy.SerializingCopier">java.lang.Long</ehcache:key-type>
        <ehcache:value-type copier="org.ehcache.impl.copy.SerializingCopier">edu.utexas.arlut.ciads.scratch.App$Foo
        </ehcache:value-type>
        <ehcache:listeners dispatcher-thread-pool="cache2Pool"/>
        <ehcache:resources>
            <ehcache:heap unit="MB">100</ehcache:heap>
            <ehcache:disk unit="GB" persistent="true">100</ehcache:disk>
        </ehcache:resources>

        <ehcache:disk-store-settings thread-pool="cache2Pool" writer-concurrency="2"/>
    </ehcache:cache>
</ehcache:config>
